---
import type { ImageMetadata } from 'astro';
import Picture from 'astro/components/Picture.astro';

import TextBox from './TextBox.astro';

const SHAPE_STYLE = {
  circle: 'rounded-full aspect-square',
  square: '',
};

type Props = {
  image?: ImageMetadata;
  shape?: keyof typeof SHAPE_STYLE;
};

const { image, shape = 'square' } = Astro.props;

const borderRadiusClass = SHAPE_STYLE[shape];
---

<div class="flex w-full items-stretch gap-x-5">
  <div
    class={`flex basis-1/4 items-center justify-center border-1 border-black ${borderRadiusClass}`}
  >
    {
      !!image && (
        <Picture
          src={image}
          formats={['avif', 'webp']}
          alt="A description of my image."
        />
      )
    }
  </div>
  <div class="flex basis-3/4 items-center">
    <div>
      <TextBox>
        <slot />
      </TextBox>
    </div>
  </div>
</div>
